---
import Profile from '@/components/profile/Profile.astro';
import SideCard from '../cards/SideCard.astro';
import TagBadge from './TagBadge.astro';
//import CatTest from './CatTest.astro';
---

<div
  id="sidebar"
  class="sticky top-16 flex h-[calc(100vh-4rem)] flex-col overflow-y-auto overflow-x-hidden px-6 pt-8 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-thumb]:bg-gray-300 dark:[&::-webkit-scrollbar-thumb]:bg-gray-700 [&::-webkit-scrollbar-track]:bg-transparent [&::-webkit-scrollbar]:w-1"
>
  <s_sidebar>
    <s_sidebar_element>
      <div>
        <SideCard title="Profile" icon="👤">
          <Profile />
        </SideCard>
      </div>
    </s_sidebar_element>

    <s_sidebar_element>
      <div>
        <SideCard title="Search" icon="🔍">
          <s_search>
            <div
              class="m-4 flex content-center justify-center gap-2 rounded-full bg-gray-100 p-2 transition-colors duration-500 dark:bg-gray-700"
            >
              <input
                type="text"
                name="[##_search_name_##]"
                value="[##_search_text_##]"
                placeholder="검색내용을 입력하세요."
                onkeypress=`if (event.keyCode == 13) { [##_search_onclick_submit_##] }`
                class="transition-colors-duration-500 min-w-0 bg-transparent text-black placeholder:text-gray-500 focus:outline-none dark:text-white dark:placeholder:text-gray-400"
              />
              <button
                type="submit"
                onclick=`[##_search_onclick_submit_##]`
                class="items-center justify-center rounded-full p-1 transition-colors duration-300 hover:cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-600"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  fill="none"
                  class="text-gray-500 dark:text-gray-400"
                >
                  <path
                    stroke="currentColor"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M21 21l-6-6m2.5-5.5a5.5 5.5 0 11-11 0 5.5 5.5 0 0111 0z"
                  ></path>
                </svg>
                <span class="sr-only">Search</span>
              </button>
            </div>
          </s_search>
        </SideCard>
      </div>
    </s_sidebar_element>

    <s_sidebar_element>
      <div class="sidebar-categories">
        <SideCard title="Categories" icon="📂">
          [##_category_list_##]
          <!-- <CatTest /> -->
        </SideCard>
      </div>
    </s_sidebar_element>

    <s_sidebar_element>
      <div>
        <SideCard title="Recent Posts" icon="📝">
          <div class="divide-y divide-gray-100 dark:divide-gray-700">
            <s_rctps_rep>
              <div
                class="group relative transition-all duration-200 hover:translate-x-1 hover:bg-gray-50 dark:hover:bg-gray-700"
              >
                <div
                  class="absolute bottom-0 left-0 top-0 w-0 bg-gradient-to-r from-blue-300 to-purple-400 transition-all duration-300 group-hover:w-1 dark:from-blue-600 dark:to-purple-700"
                >
                </div>
                <a
                  href="[##_rctps_rep_link_##]"
                  class="block px-4 py-2 no-underline"
                >
                  <h3
                    class="mb-2 line-clamp-2 truncate text-sm font-medium leading-tight text-gray-900 transition-colors duration-200 group-hover:text-purple-700 dark:text-gray-100 dark:group-hover:text-indigo-300"
                  >
                    [##_rctps_rep_title_##]
                  </h3>
                  <div class="flex items-center justify-between">
                    <div
                      class="flex items-center gap-1 whitespace-nowrap text-xs text-gray-500 dark:text-gray-400"
                    >
                      <span>🕒</span>
                      <span>[##_rctps_rep_simple_date_##]</span>
                    </div>
                    <TagBadge name=" [##_rctps_rep_tag_##] " />
                  </div>
                </a>
              </div>
            </s_rctps_rep>
          </div>
        </SideCard>
      </div>
    </s_sidebar_element>

    <s_sidebar_element>
      <div>
        <SideCard title="Random Tags" icon="🏷️">
          <div class="flex flex-wrap gap-2 p-2">
            <s_random_tags>
              <a href="[##_tag_link_##]" class="[##_tag_class_##]">
                <TagBadge name="[##_tag_name_##]" />
              </a>
            </s_random_tags>
          </div>
        </SideCard>
      </div>
    </s_sidebar_element>
  </s_sidebar>
  <div class="h-4 max-w-sm overflow-hidden rounded-lg"></div>
</div>
